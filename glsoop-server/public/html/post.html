<!DOCTYPE html>
<html lang="ko">
<head>
  <!--
    글 상세 페이지(post.html)
    - 연동 CSS: base.css, components.css, post.css
    - 연동 JS: header.js(네비), post.js(상세/관련글 로딩), postCard.js(관련 글 카드), utils.js
  -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>글숲 - 글 상세</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/app.css">

  <!-- 인스타용 내보내기 바(간단 스타일) -->
  <link rel="stylesheet" href="/css/pages/ig-export.css" />
</head>

<body class="winter-theme page-post">
  <!-- 상단 헤더 네비게이션 -->
  <nav class="navbar navbar-expand-lg navbar-dark custom-navbar fixed-top nav-height">
    <div class="gls-container">
      <a class="navbar-brand" href="/index.html">글숲</a>

      <button class="navbar-toggler" type="button" data-gls-toggle="nav" aria-controls="navbarNav" aria-expanded="false">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav gls-me-lg-3 category-dropdown-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="categoryDropdown" role="button" data-gls-toggle="dropdown" aria-expanded="false">
              카테고리
            </a>
            <ul class="dropdown-menu nav-category-menu" aria-labelledby="categoryDropdown">
              <li><a class="dropdown-item nav-category-item" href="/explore">전체</a></li>
              <li><a class="dropdown-item nav-category-item" href="/html/category.html?category=poem">시</a></li>
              <li><a class="dropdown-item nav-category-item" href="/html/category.html?category=essay">에세이/일기</a></li>
              <li><a class="dropdown-item nav-category-item" href="/html/category.html?category=short">짧은 구절</a></li>
            </ul>
          </li>
        </ul>

        <ul class="navbar-nav gls-ms-auto before-login">
          <li class="nav-item"><a class="nav-link" href="/html/login.html">로그인</a></li>
          <li class="nav-item"><a class="nav-link" href="/html/signup.html">회원가입</a></li>
        </ul>

        <ul class="navbar-nav gls-ms-auto after-login" style="display: none;">
          <li class="nav-item"><span class="nav-link" id="navUserName"></span></li>
          <li class="nav-item"><a class="nav-link" href="/html/mypage.html">마이페이지</a></li>
          <li class="nav-item"><a class="nav-link" href="/html/editor.html">글쓰기</a></li>
          <li class="nav-item">
            <button
              class="user-profile"
              id="logoutBtn"
              type="button"
              aria-label="로그아웃"
            >
              <span class="user-profile-inner">
                <svg
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                >
                  <g data-name="Layer 2" id="Layer_2">
                    <path
                      d="m15.626 11.769a6 6 0 1 0 -7.252 0 9.008 9.008 0 0 0 -5.374 8.231 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 9.008 9.008 0 0 0 -5.374-8.231zm-7.626-4.769a4 4 0 1 1 4 4 4 4 0 0 1 -4-4zm10 14h-12a1 1 0 0 1 -1-1 7 7 0 0 1 14 0 1 1 0 0 1 -1 1z"
                    ></path>
                  </g>
                </svg>
                <span class="user-profile-label">로그아웃</span>
              </span>
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- 글 상세 (옵션 B: 데스크탑 2컬럼) -->
  <section class="page-section post-page post-veil">
    <div class="gls-container post-shell">
      <div class="post-layout">
        <!-- 좌측: 본문(읽기) -->
        <main class="post-main" aria-label="글 본문">
          <div class="post-panel gls-surface-panel gls-surface-veil post-content-panel post-glass-panel">
            <div id="postDetail">
              <p class="gls-text-muted">글을 불러오는 중입니다...</p>
            </div>
          </div>

          <div class="post-meta-bar" id="postMetaBar" aria-label="글 정보 영역" hidden>
            <div class="post-meta-left">
              <div class="post-meta-category" id="postMetaCategory"></div>

              <div class="post-meta-tags-wrap" aria-label="해시태그">
                <span class="post-tags-label post-chip-btn" aria-hidden="true">태그</span>
                <div class="post-meta-tags" id="postMetaTags"></div>
              </div>
            </div>

            <a href="/explore" class="post-back-link" id="backToFeedLink">← 탐색으로 돌아가기</a>
          </div>
        </main>

        <!-- 우측: 액션 + 관련 글(시안 A) -->
        <aside class="post-side" aria-label="상세 도구 및 관련 글">
          <div class="post-side-inner">
            <div class="post-actions-panel gls-surface-panel post-toolbar">
              <div class="post-actions-grid">
                <button id="sideLikeBtn" type="button" class="post-side-btn post-side-like gls-action-tile" aria-label="좋아요">
                  <span class="gls-action-tile__content">
                    <span class="post-side-like-heart gls-action-tile__icon" aria-hidden="true">♡</span>
                    <span class="post-side-like-count" id="sideLikeCount">0</span>
                    <span class="post-side-like-label">좋아요</span>
                  </span>
                </button>
                <button id="sideBookmarkBtn" type="button" class="post-side-btn gls-action-tile" aria-label="북마크">북마크</button>
                <button id="sideShareBtn" type="button" class="post-side-btn gls-action-tile" aria-label="공유">공유</button>
              </div>
            </div>

            <div class="post-related-panel gls-surface-panel">
              <div class="post-related-head">
                <h4 class="post-related-title">관련 글</h4>
                <button id="relatedMoreBtn" type="button" class="gls-btn gls-btn-secondary gls-btn-xs post-related-more gls-action-pill gls-action-pill--sm">더 보기</button>
              </div>

              <div id="relatedHighlight" class="post-related-highlight">
                <p class="gls-text-muted gls-text-small gls-mb-0">관련 글을 불러오는 중입니다...</p>
              </div>
              <div id="relatedList" class="post-related-list"></div>

              <!-- (호환용) 기존 관련 글 컨테이너: JS가 없거나 구버전일 때만 사용 -->
              <div id="relatedPosts" class="post-related-legacy" hidden></div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </section>

          <!-- 푸터 -->
  <footer class="custom-footer">
    <div class="gls-container">
      <div class="gls-flex gls-flex-col gls-gap-2 gls-items-center gls-text-center gls-md-flex-row gls-justify-between">
        <div class="footer-left gls-text-md-start">
          <div class="footer-brand">글숲</div>
          <p class="footer-subtitle gls-mb-0">마음을 나누는 작은 숲</p>
        </div>
        <div class="footer-right gls-text-md-end footer-meta">
          <p class="footer-copy gls-mb-1">조용히 머물다 가는 공간을 함께 가꿔요.</p>
          <p class="footer-small gls-mb-0">&copy; 2025 글숲</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3/dist/purify.min.js"></script>
  <script src="/js/utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/seasonal.js" defer></script>
  <script src="/js/theme.js" defer></script>
  <script src="/js/header.js"></script>
  <script src="/js/postCard.js"></script>
  <script src="/js/bookmarkModal.js"></script>
  <script src="/js/post.js"></script>

  <!-- 인스타 내보내기 -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="/js/igExport.js?v=3"></script>
</body>
</html>
