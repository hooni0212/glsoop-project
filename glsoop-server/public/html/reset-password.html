<!DOCTYPE html>
<html lang="ko">
<head>
  <!--
    비밀번호 재설정 페이지(reset-password.html)
    - 연동 CSS: base.css, components.css, login.css
    - 연동 JS: header.js, reset-password.js(/api/password-reset 호출)
    - 폼 위치: #resetPwForm (password/confirm/token hidden)
  -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>비밀번호 재설정 | 글숲</title>

  <!-- Google Fonts: 글숲 공통 폰트 -->
  <link
    href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Bootstrap CSS: 레이아웃 및 폼 스타일 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="/css/app.css">
</head>
<body class="winter-theme">
  <!-- 상단 네비게이션 바 -->
  <nav class="navbar navbar-expand-lg navbar-dark custom-navbar fixed-top nav-height">
    <div class="gls-container">
      <!-- 로고: 메인 페이지로 이동 -->
      <a class="navbar-brand" href="/index.html">글숲</a>

      <!-- 모바일 토글 버튼(햄버거 버튼) -->
      <button
        class="navbar-toggler"
        type="button"
        data-gls-toggle="nav" aria-controls="navbarNav" aria-expanded="false"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- 네비게이션 메뉴 영역 -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav gls-me-lg-3 category-dropdown-nav">
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="categoryDropdown"
              role="button"
              data-gls-toggle="dropdown"
              aria-expanded="false"
            >
              카테고리
            </a>
            <ul class="dropdown-menu nav-category-menu" aria-labelledby="categoryDropdown">
              <li><a class="dropdown-item nav-category-item" href="/explore">전체</a></li>
              <li><a class="dropdown-item nav-category-item" href="/html/category.html?category=poem">시</a></li>
              <li><a class="dropdown-item nav-category-item" href="/html/category.html?category=essay">에세이/일기</a></li>
              <li><a class="dropdown-item nav-category-item" href="/html/category.html?category=short">짧은 구절</a></li>
            </ul>
          </li>
        </ul>
        <!-- 로그인 전 메뉴 -->
        <!-- header.js 에서 /api/me 결과에 따라 before-login / after-login 토글 -->
        <ul class="navbar-nav gls-ms-auto before-login">
          <li class="nav-item">
            <a class="nav-link" href="/html/login.html">로그인</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/signup.html">회원가입</a>
          </li>
        </ul>

        <!-- 로그인 후 메뉴 (기본은 숨김) -->
        <ul class="navbar-nav gls-ms-auto after-login" style="display:none;">
          <!-- 로그인한 사용자 이름 표시 -->
          <li class="nav-item">
            <span class="nav-link" id="navUserName"></span>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/mypage.html">마이페이지</a>
          </li>
          <li class="nav-item">
            <button
              class="user-profile"
              id="logoutBtn"
              type="button"
              aria-label="로그아웃"
            >
              <span class="user-profile-inner">
                <svg
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                >
                  <g data-name="Layer 2" id="Layer_2">
                    <path
                      d="m15.626 11.769a6 6 0 1 0 -7.252 0 9.008 9.008 0 0 0 -5.374 8.231 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 9.008 9.008 0 0 0 -5.374-8.231zm-7.626-4.769a4 4 0 1 1 4 4 4 4 0 0 1 -4-4zm10 14h-12a1 1 0 0 1 -1-1 7 7 0 0 1 14 0 1 1 0 0 1 -1 1z"
                    ></path>
                  </g>
                </svg>
                <span class="user-profile-label">로그아웃</span>
              </span>
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- 비밀번호 재설정 메인 섹션 -->
  <section class="gls-py-5 gls-mt-5">
    <div class="gls-container">
      <!-- 페이지 제목 -->
      <h2 class="gls-text-center gls-mb-4">비밀번호 재설정</h2>

      <!-- 비밀번호 재설정 폼 -->
      <!-- /html/forgot-password.html 에서 받은 메일의 링크를 통해 진입하는 페이지 -->
      <form id="resetForm" class="mx-auto" style="max-width: 400px;">
        <!-- 새 비밀번호 입력 -->
        <div class="gls-mb-3">
          <label class="gls-label">새 비밀번호</label>
          <input
            type="password"
            name="newPw"
            class="gls-input"
            required
            minlength="8"
          />
        </div>

        <!-- 새 비밀번호 확인 -->
        <div class="gls-mb-3">
          <label class="gls-label">새 비밀번호 확인</label>
          <input
            type="password"
            name="newPw2"
            class="gls-input"
            required
            minlength="8"
          />
        </div>

        <!-- 제출 버튼 -->
        <button type="submit" class="gls-btn gls-btn-primary gls-btn-block">
          비밀번호 변경
        </button>

        <!-- 처리 결과 메시지 영역 (성공/실패 안내) -->
        <div
          id="resetMessage"
          class="gls-mt-3 gls-text-center"
          style="display:none;"
        ></div>
      </form>
    </div>
  </section>

  <!-- JS -->
  <!-- 헤더 로그인 상태 처리 스크립트 (/api/me 호출로 before/after-login 토글) -->
  <script src="../js/theme.js" defer></script>
  <script src="../js/header.js"></script>
  <!-- 비밀번호 재설정 전용 로직 (토큰 읽기, 검증, /api/password-reset 제출 등) -->
  <script src="../js/reset-password.js"></script>
</body>
</html>
