/* TODO(css): winter overrides were previously in components/theme-winter-compat.css; migrate selectors here and remove compat. */
/* =========================
   Winter Theme (글숲 겨울 스킨)
   - body에 .winter-theme 클래스가 붙었을 때만 적용
   - 눈 애니메이션은 winter-theme + 눈 적용 페이지에서만 렌더링
========================= */

/* 1. 전체 배경 & 텍스트 컬러 */
body.winter-theme {
  color: #1E2A33;

  /* 헤더/CTA용 공통 네이비 계열 그라디언트 */
  --gls-header-gradient: linear-gradient(90deg, #2C4C72, #3F668F);
  --gls-navbar-brand-gradient: linear-gradient(120deg, #F8FDFF, #EAF5FF);
  --gls-header-strong: #345b83;
  --gls-footer-bg: linear-gradient(90deg, #2C4C72, #3F668F);
  --gls-footer-text: #F4FBFF;
  --gls-footer-border: rgba(255, 255, 255, 0.22);
  --gls-footer-shadow: 0 6px 18px rgba(45, 83, 132, 0.26);
  --gls-footer-link: #F4FBFF;

  /* 글/카드 톤 변수들 그대로 유지 */
  --author-surface: rgba(227, 240, 255, 0.65);
  --author-card-bg: rgba(255, 255, 255, 0.94);
  --author-card-shadow: 0 12px 32px rgba(34, 70, 104, 0.2);
  --author-card-shadow-compact: 0 8px 18px rgba(34, 70, 104, 0.14);
  --author-text-muted: #4a5b6b;
  --author-divider: rgba(45, 83, 132, 0.18);
  --author-accent: #2f6c8a;

  /* 버튼 계열은 여름 토큰을 그대로 사용해 계절간 품질/톤 차이를 완화 */
  --gls-action-accent: #009688;
  --gls-action-border: rgba(0, 150, 136, 0.22);
  --gls-action-border-strong: rgba(0, 150, 136, 0.35);
  --gls-action-surface: rgba(255, 255, 255, 0.92);
  --gls-action-surface-strong: rgba(0, 150, 136, 0.08);
  --gls-action-glow: 0 10px 26px rgba(0, 150, 136, 0.18);
  --gls-account-surface: color-mix(in srgb, #f2f9ff 88%, rgba(47, 108, 138, 0.12));
  --gls-account-menu-surface: color-mix(in srgb, rgba(244, 250, 255, 0.94) 82%, rgba(47, 108, 138, 0.08));
  --gls-account-border: color-mix(in srgb, rgba(47, 108, 138, 0.26) 65%, rgba(255, 255, 255, 0.36));
  --gls-account-menu-border: color-mix(in srgb, rgba(47, 108, 138, 0.24) 70%, rgba(255, 255, 255, 0.34));
  --gls-account-text: color-mix(in srgb, #1f2f3a 70%, #f4fbff 30%);
  --gls-account-muted: color-mix(in srgb, #416073 72%, rgba(230, 244, 255, 0.8));
  --gls-account-avatar: color-mix(in srgb, #2f6c8a 62%, #eef8ff 38%);
  --gls-account-shadow: 0 8px 20px rgba(47, 108, 138, 0.18);
  --gls-account-shadow-hover: 0 12px 26px rgba(47, 108, 138, 0.2);
  --gls-account-menu-shadow: 0 10px 24px rgba(26, 62, 80, 0.16);

  /* 배경 레이어:
     1~3: 안개/하이라이트
     4: 나무 이미지 (가로 타일)
     5: 맨 아래 큰 하늘 그라디언트 */
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,0.25) 0, transparent 60%),
    radial-gradient(circle at 80% 15%, rgba(255,255,255,0.18) 0, transparent 55%),
    radial-gradient(circle at 50% 80%, rgba(255,255,255,0.16) 0, transparent 60%),
    url('/img/snowingtree.jpg'),
    radial-gradient(circle at top,
      #F5FBFF 0%,
      #E3F0FF 40%,
      #DDE7F3 75%,
      #C7D2E3 100%
    );

  /* 각 레이어 반복 방식 */
  background-repeat:
    no-repeat,
    no-repeat,
    no-repeat,
    repeat-x,      /* ⬅️ 나무 이미지는 가로 방향으로만 타일 */
    no-repeat;

  /* 각 레이어 위치 */
  background-position:
    10% 20%,        /* 위쪽 왼쪽 하이라이트 */
    80% 15%,        /* 위쪽 오른쪽 하이라이트 */
    50% 80%,        /* 아래쪽 중앙 하이라이트 */
    bottom center,  /* 나무는 아래쪽에서 시작 */
    top center;     /* 하늘 그라디언트 */

  /* 각 레이어 크기 */
  background-size:
    auto,
    auto,
    auto,
    auto 100vh,      /* 나무 높이 (원하면 50vh~60vh 사이로 조절) */
    cover;

  background-attachment: fixed; /* 스크롤해도 배경은 고정 */
}


/* base.css에서 body에 깔아둔 배경보다 우선되도록
   (body에 winter-theme가 붙어있으니 이 쪽이 이김) */

/* 2. 살짝 흐린 안개/구름 레이어 */
body.winter-theme::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,0.25) 0, transparent 60%),
    radial-gradient(circle at 80% 15%, rgba(255,255,255,0.18) 0, transparent 55%),
    radial-gradient(circle at 50% 80%, rgba(255,255,255,0.16) 0, transparent 60%);
}

/* 2-1. 눈이 잘 보이도록 흐릿한 질감 레이어 추가 */
body.winter-theme::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  background-image:
    radial-gradient(rgba(255, 255, 255, 0.35) 0.6px, transparent 0.6px),
    radial-gradient(rgba(28, 58, 86, 0.07) 0.8px, transparent 0.8px),
    radial-gradient(rgba(255, 255, 255, 0.25) 1px, transparent 1px);
  background-size: 120px 120px, 90px 90px, 50px 50px;
  mix-blend-mode: overlay;
  opacity: 0.55;
}

/* =========================
   7. 눈 효과 (홈 / 글 / 작가)
   - winter-theme + 눈 적용 페이지(page-index / page-post / page-author)
========================= */

/* 전체 화면 눈 레이어 (배경 위, 카드/텍스트 위에 얇게) */
.page-index.winter-theme .snow-layer,
.page-post.winter-theme .snow-layer,
.page-author.winter-theme .snow-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 2; /* 카드/본문 위, 네비(부트스트랩 fixed-top z-index 1030)보단 아래 */
}

/* 공통 눈 조각 스타일 */
.page-index.winter-theme .snowflake,
.page-post.winter-theme .snowflake,
.page-author.winter-theme .snowflake {
  position: absolute;
  top: -10px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.95);
  box-shadow: 0 0 6px rgba(216, 233, 255, 0.9);
  opacity: 0.8;
  filter: blur(0.3px);
  animation-name: snowFall;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

/* 가까운 큰 눈 (빠르게, 더 또렷하게) */
.page-index.winter-theme .snowflake.big,
.page-post.winter-theme .snowflake.big,
.page-author.winter-theme .snowflake.big {
  width: 8px;
  height: 8px;
  animation-duration: 6s;
}

/* 중간 거리 눈 */
.page-index.winter-theme .snowflake.mid,
.page-post.winter-theme .snowflake.mid,
.page-author.winter-theme .snowflake.mid {
  width: 5px;
  height: 5px;
  animation-duration: 9s;
  opacity: 0.7;
}

/* 멀리 보이는 작은 눈 (느리게, 흐릿하게) */
.page-index.winter-theme .snowflake.small,
.page-post.winter-theme .snowflake.small,
.page-author.winter-theme .snowflake.small {
  width: 3px;
  height: 3px;
  animation-duration: 13s;
  opacity: 0.5;
}

/* 기본 눈 떨어지는 방향: 살짝 오른쪽으로 흘러내림 */
@keyframes snowFall {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(15px, 110vh, 0);
  }
}

/* 반대 방향으로 흘러가는 눈 (원하면 JS에서 일부에 이거 적용) */
@keyframes snowFallAlt {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(-10px, 110vh, 0);
  }
}

/* =========================
   8. 반응형: 모바일에서 눈 너무 과하면 살짝 줄이기
========================= */

@media (max-width: 576px) {
  .page-index.winter-theme .snowflake.big,
  .page-post.winter-theme .snowflake.big,
  .page-author.winter-theme .snowflake.big {
    width: 7px;
    height: 7px;
  }
  .page-index.winter-theme .snowflake.mid,
  .page-post.winter-theme .snowflake.mid,
  .page-author.winter-theme .snowflake.mid {
    width: 4px;
    height: 4px;
  }
  .page-index.winter-theme .snowflake.small,
  .page-post.winter-theme .snowflake.small,
  .page-author.winter-theme .snowflake.small {
    width: 2px;
    height: 2px;
  }
}
