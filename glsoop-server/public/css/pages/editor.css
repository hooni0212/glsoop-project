/* =============================================================
   글 작성·수정 에디터 스타일 (public/css/editor.css)
   - 사용 위치: /html/editor.html
   - 주요 영역: 에디터 래퍼, Quill 본문, 해시태그 입력/칩 리스트, 미리보기 카드
   - 폰트/미리보기는 JS(editor.js)와 맞물려 동작하므로 섹션별 주석을 참고하세요.
   ============================================================= */

/* =========================
   1. 에디터 레이아웃 & Quill 기본
========================= */

/* =============================================================
   Layout (refactor-safe)
   - 목표:
     1) 데스크탑: 2컬럼(작성/미리보기) + 유리톤 카드(3번 스샷 느낌)
     2) 모바일: 세로 스택(1~2번 스샷 흐름)
   - 방식: editor.html에 추가된 .page-editor 범위에서만 Bootstrap .card를 덮어씀
============================================================= */

/* Bootstrap의 .card 배경(#fff)이 glass surface를 이기는 문제를 페이지 범위에서만 해결 */
.page-editor .card {
  background: var(--gls-surface-glass-bg, var(--gls-glass-bg-subtle));
  border: 1px solid var(--gls-surface-glass-border, var(--gls-ghost-border));
  box-shadow: var(--gls-surface-glass-shadow, var(--gls-glass-shadow));
  backdrop-filter: blur(var(--gls-surface-glass-blur, var(--gls-glass-blur)));
  -webkit-backdrop-filter: blur(var(--gls-surface-glass-blur, var(--gls-glass-blur)));
}

/* 본문 2컬럼 그리드(데스크탑) / 세로 스택(모바일) */
.editor-main-grid {
  display: grid;
  grid-template-columns: 1fr;
  align-items: start;
}

@media (min-width: 992px) {
  .editor-main-grid {
    grid-template-columns: minmax(420px, 1fr) minmax(360px, 0.9fr);
  }
}

/* 상단 입력 3개(제목/폰트/카테고리) 정렬 */
.editor-top-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--gls-space-3, 12px);
}

@media (min-width: 768px) {
  .editor-top-grid {
    grid-template-columns: 1.4fr 0.8fr 0.8fr;
    align-items: end;
  }
}

/* 해시태그 입력 + 저장 버튼: 데스크탑에서 한 줄, 모바일에서 스택 */
.hashtag-save-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--gls-space-3, 12px);
}

@media (min-width: 768px) {
  .hashtag-save-grid {
    grid-template-columns: 1fr auto;
    align-items: end;
  }
}

/* 네비게이션바가 fixed-top 이므로 에디터가 가려지지 않도록 상단 패딩 */
.editor-container-wrapper {
  padding-top: calc(var(--gls-nav-height) + var(--gls-space-2));
  max-width: var(--gls-page-max-width, 900px);
  margin: 0 auto;
}

/* Quill 에디터 전체 박스 */
#editor-container {
  height: 500px;
  background-color: #ffffff;
  font-size: 18px;
  border-radius: 10px;
}

/* 에디터 주변 여백 */
.quill-wrapper {
  margin-top: 20px;
  margin-bottom: 40px;
}

/* Quill toolbar 스타일 좀 더 깔끔하게 */
.ql-toolbar {
  border-radius: 10px 10px 0 0;
}

/* Quill editor box */
.ql-container {
  border-radius: 0 0 10px 10px;
}

/* 글쓰기 제목 */
.write-title-input {
  width: 100%;
  padding: 15px;
  font-size: 24px;
  border: 1px solid #ccc;
  border-radius: 10px;
  margin-bottom: 20px;
}

/* 저장 버튼 */
.save-btn {
  display: inline-block;
  padding: 10px 18px;
  background-color: #343a40;
  color: white;
  border-radius: 8px;
  border: none;
  font-size: 18px;
  margin-top: 20px;
  cursor: pointer;
  transition: 0.2s;
}

.save-btn:hover {
  background-color: #495057;
}

/* editor 전용 카드형 에디터 박스 */
#editor {
  background-color: #ffffff;
  border-radius: 1rem;
  border: 1px solid #e1e4f0;
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.04);
}

#toolbar {
  border-radius: 0.8rem 0.8rem 0 0;
  border: 1px solid #e1e4f0;
  border-bottom: none;
  background-color: #fafbff;
}

#saveBtn {
  /* 버튼 톤 통일: pill(999px) 대신 둥근 직사각형 */
  border-radius: var(--gls-btn-radius);
}

/* Quill 툴바와 에디터 사이 여백 */
.ql-toolbar.ql-snow {
  margin-bottom: 10px; /* 원하는 만큼 숫자 조절 가능 (px) */
}

/* 에디터 박스 모양 정리 */
.ql-container.ql-snow {
  border-radius: 1rem;
  border: 1px solid #e1e4f0;
  background-color: #ffffff;
}

/* 실제 글 쓰는 영역 여백 */
.ql-editor {
  min-height: 250px;
  padding: 16px 20px;
}

/* 에디터 페이지: 좌/우 카드 높이 맞추기 */
.editor-main-row {
  align-items: stretch;  /* 양쪽 컬럼을 같은 높이로 */
}

/* 오른쪽 아래 미리보기 카드가 남은 공간을 꽉 채우도록 */
.editor-preview-card {
  display: flex;
  flex-direction: column;
}

/* 미리보기 카드: 짧은 글은 고정 높이 + 중앙 정렬, 긴 글은 부드럽게 확장 */
#previewContent {
  --gls-preview-min-lines: 4;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: var(--gls-space-2, 8px);
  text-align: center;
  min-height: calc(
    (var(--gls-preview-min-lines) * 1em * var(--gls-lh-relaxed, 1.7)) + var(--gls-space-3, 12px)
  );
  max-height: clamp(12rem, 28vh, 18rem);
  overflow: auto;
}

/* 글자 수가 적을 때도 카드다운 여백 확보 */
#previewContent::after {
  content: '';
  position: absolute;
  inset: var(--gls-space-3, 12px);
  border-radius: calc(var(--gls-radius-md, 14px) - var(--gls-space-3, 12px));
  pointer-events: none;
}

.editor-preview-more {
  display: none !important;
}

/* =========================
   2. 글쓰기 페이지 전용 카드/레이아웃
========================= */

/* 에디터 전체를 감싸는 래퍼 (선택적으로 사용) */
.editor-wrapper {
  position: relative;
}

/* Quill 에디터 박스 살짝 배경 */
.editor-box {
  background-color: #ffffff;
}

/* 글자 수 표시: 에디터 오른쪽 아래 */
.char-counter {
  position: absolute;
  right: 12px;
  bottom: 8px;
  font-size: 0.8rem;
  pointer-events: none; /* 클릭 방해 X */
}

/* 작은 설명 텍스트 */
.editor-subtitle {
  font-size: 0.95rem;
  opacity: 0.85;
}

/* 좌우 카드 느낌 */
.editor-left-card,
.editor-right-card {
  border-radius: 1.1rem;
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.05);
}

/* 오른쪽 카드가 살짝 더 강조되도록 */
.editor-right-card {
  border: 1px solid rgba(46, 139, 87, 0.08);
}

/* 저장 버튼 바 (데스크탑에서 살짝 고정 느낌) */
.editor-save-bar {
  position: sticky;
  bottom: 0;
  padding-top: 1.5rem;
  padding-bottom: 0.5rem;
  background: linear-gradient(
    to top,
    rgba(240, 242, 233, 0.98),
    rgba(240, 242, 233, 0)
  );
}

/* 모바일에서는 일반 레이아웃 */
@media (max-width: 576px) {
  .editor-save-bar {
    position: static;
    padding-top: 1.5rem;
    padding-bottom: 0;
  }

  .editor-save-bar #saveBtn {
    width: 100%;
    border-radius: 999px;
  }
}

/* 미리보기 하단 메타 정보 */
.preview-meta {
  border-top: 1px dashed rgba(0, 0, 0, 0.05);
  padding-top: 0.6rem;
}

/* 해시태그 칩 스타일 (작성용) */
#hashtagChips {
  margin-top: 0.45rem;
}

.hashtag-chip {
  display: inline-flex;
  align-items: center;
  padding: 0.15rem 0.55rem;
  margin-right: 0.25rem;
  margin-bottom: 0.25rem;
  border-radius: var(--gls-chip-radius);
  font-size: 0.8rem;
  background-color: #eaf6ef;
  color: #2e8b57;
}

.hashtag-chip-remove {
  border: none;
  background: transparent;
  padding: 0 0 0 0.2rem;
  margin-left: 0.1rem;
  font-size: 0.8rem;
  line-height: 1;
  cursor: pointer;
  color: #8c8c8c;
}

.hashtag-chip-remove:hover {
  color: #555;
}

/* =========================
   3. Quill 정렬 클래스
========================= */

/* 에디터 안 정렬 */
.ql-editor .ql-align-center {
  text-align: center;
}

.ql-editor .ql-align-right {
  text-align: right;
}

.ql-editor .ql-align-justify {
  text-align: justify;
}

/* 피드 / 작가 페이지 카드 안 (quote-card 재사용) */
.quote-card .ql-align-center {
  text-align: center;
}

.quote-card .ql-align-right {
  text-align: right;
}

.quote-card .ql-align-justify {
  text-align: justify;
}
