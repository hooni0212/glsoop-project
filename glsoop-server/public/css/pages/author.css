/* =============================================================
   작가 페이지 전용 스타일 (public/css/author.css)
   - 사용 위치: /html/author.html
   - 주요 섹션: 프로필 카드(왼쪽), 글 목록 카드(오른쪽), 팔로우 버튼/메타 라인
   - 테마 변수: 작가 카드 배경·음영, 포인트 색상을 일괄 제어
   ============================================================= */

/* =============================================================
   Architecture audit notes (2025-XX-XX)
   - 전역 누수 방지: 모든 규칙은 body.page-author 또는 author- prefix로 제한
   - 컴포넌트 재정의 제거: surfaces는 변수 override로 통일
   - 교차 페이지 의존 제거: post-panel/feed-post-content/quote-card 직접 덮기 제거
   ============================================================= */

/* =========================
  1. 작가 페이지 공통 영역
========================= */

body.page-author {
  --author-surface: var(--gls-color-bg);
  --author-card-shadow: var(--gls-glass-shadow);
  --author-card-shadow-compact: var(--gls-shadow-sm);
  --author-text-muted: var(--gls-color-muted);
  --author-divider: var(--gls-glass-border);
  --author-accent: var(--gls-color-primary);
  --author-page-max: clamp(1200px, 92vw, 1320px);
  --author-page-padding: clamp(16px, 2.6vw, 32px);
  --author-card-padding: clamp(22px, 2.1vw, var(--gls-card-padding, 28px));
  --author-glass-bg: rgba(255, 255, 255, 0.45);
  --author-glass-border: rgba(255, 255, 255, 0.6);
  --author-glass-blur: 20px;
  --author-glass-radius: 22px;
  --author-glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.04);
  --gls-surface-panel-bg: var(--author-glass-bg);
  --gls-surface-panel-border: var(--author-glass-border);
  --gls-surface-panel-radius: var(--author-glass-radius);
  --gls-surface-panel-shadow: var(--author-glass-shadow);
  --gls-surface-panel-blur: var(--author-glass-blur);
  color: var(--gls-text);
  background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.55), transparent 35%),
    radial-gradient(circle at 80% 0%, rgba(255, 255, 255, 0.4), transparent 28%),
    var(--gls-color-bg);
}

/* 섹션 배경색 (테마 변수를 우선 사용) */
.author-page-section {
  background: var(--author-surface);
  position: relative;
  z-index: 1;
  padding-top: calc(var(--gls-nav-height) + var(--gls-space-6));
  padding-bottom: var(--gls-space-8);
}

.author-page-shell {
  max-width: var(--author-page-max);
  margin: 0 auto;
  padding: 0 var(--author-page-padding);
}

.author-page-header {
  display: flex;
  flex-direction: column;
  gap: var(--gls-space-1);
  background: color-mix(in srgb, var(--author-glass-bg) 70%, transparent);
  border: 1px solid var(--author-glass-border);
  border-radius: var(--author-glass-radius);
  box-shadow: var(--author-glass-shadow);
  backdrop-filter: blur(var(--author-glass-blur));
  -webkit-backdrop-filter: blur(var(--author-glass-blur));
  padding: var(--author-card-padding);
  margin-bottom: clamp(20px, 2vw, 28px);
}

/* 메인 레이아웃: 두 컬럼(row) 상단 정렬 */
.author-main-row,
.author-page-main-row {
  align-items: start;
  display: grid;
  grid-template-columns: minmax(320px, 360px) minmax(720px, 1fr);
  gap: clamp(36px, 4vw, 44px);
  justify-content: center;
}

.author-right-col {
  min-width: 0;
  max-width: 1020px;
  width: 100%;
}

@media (max-width: 960px) {
  .author-page-main-row {
    grid-template-columns: 1fr;
    gap: var(--gls-card-gap);
  }
}

/* =========================
  2. 카드 공통 스타일
========================= */

/* 작가 정보 영역(왼쪽 카드 내용) */
.author-profile-card .card-body {
  font-size: 0.96rem;
  padding: calc(var(--author-card-padding) + 2px);
  gap: var(--gls-space-2);
  word-break: normal;
  overflow-wrap: normal;
  overflow-y: auto;
}

.author-card-title {
  font-weight: 700;
  font-size: 1.02rem;
  margin-bottom: var(--gls-space-2);
  color: var(--gls-text);
}

.author-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--gls-space-2);
}

.author-card-header .author-card-title {
  margin-bottom: 0;
}

/* 오른쪽: 글 목록 카드 안의 개별 글 카드 */
.author-posts-card {
  padding: 0;
}

.author-posts-card-body {
  padding: calc(var(--author-card-padding) + 6px);
}

#authorPostsList,
.author-posts-list {
  display: grid;
  gap: var(--gls-card-gap);
}

.author-post-card {
  margin: 0;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  border-radius: var(--gls-radius-card);
  transition: border-color 0.16s ease, transform 0.16s ease;
}

@media (hover: hover) and (pointer: fine) {
  .author-post-card:hover {
    border-color: color-mix(in srgb, var(--gls-surface-panel-border) 70%, #ffffff 30%);
    transform: translateY(-2px);
  }
}

.author-post-card:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--author-accent) 45%, transparent);
  outline-offset: 3px;
}

.author-post-inner {
  padding: clamp(18px, 2.8vw, 22px);
  display: flex;
  flex-direction: column;
  gap: var(--gls-space-2);
}

.author-post-content {
  margin-top: var(--gls-space-2);
  text-align: left;
}

body.page-author .author-feed-post-content {
  padding: 0;
  max-height: none;
  overflow: visible;
}

body.page-author .author-post-preview {
  position: relative;
  padding: var(--gls-space-2) 0 var(--gls-space-1);
  --author-preview-lines: 10;
  --author-preview-height: calc(
    (var(--author-preview-lines) * 1em * var(--gls-lh-relaxed, 1.7))
    + 1.5rem
  );
  max-height: var(--author-preview-height);
  overflow: hidden;
  -webkit-mask-image: linear-gradient(180deg, #000 78%, rgba(0, 0, 0, 0));
  mask-image: linear-gradient(180deg, #000 78%, rgba(0, 0, 0, 0));
}

body.page-author .author-post-preview .author-quote-card {
  background: var(--gls-ghost-bg);
  border: 1px solid var(--gls-ghost-border);
  border-radius: var(--gls-btn-radius);
  box-shadow: none;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  white-space: pre-wrap;
  word-break: keep-all;
  overflow-wrap: anywhere;
}

.author-label {
  color: var(--author-text-muted);
  letter-spacing: -0.01em;
}

.author-identity-block {
  display: flex;
  align-items: center;
  padding-bottom: var(--gls-space-3);
  border-bottom: 1px solid var(--author-divider);
}

.author-identity-block .gls-user-badge {
  width: 100%;
}

.author-identity-block .gls-user-badge__avatar {
  box-shadow: var(--author-card-shadow-compact);
  border-color: var(--author-divider);
}

.author-identity-block .gls-user-badge__chip {
  border-color: var(--author-divider);
  background: color-mix(in srgb, var(--gls-glass-bg-strong) 60%, #ffffff 40%);
  color: var(--gls-text);
}

.author-bio-text,
.author-about-text {
  line-height: 1.6;
  word-break: keep-all;
}

.author-bio-text {
  color: var(--gls-text);
  font-weight: 500;
}

.author-about-text {
  color: var(--gls-text);
}

.author-bio-block {
  padding: var(--gls-space-3) 0 var(--gls-space-2);
  border-bottom: 1px solid var(--author-divider);
}

.author-stats-card {
  padding: var(--gls-space-3) 0;
  display: flex;
  flex-direction: column;
  gap: var(--gls-space-2);
}

.author-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--gls-space-2) var(--gls-space-3);
}

.author-stat {
  position: relative;
  overflow: hidden;
  padding: var(--gls-space-2) var(--gls-space-2);
  border: 1px solid color-mix(in srgb, var(--gls-border) 40%, transparent);
  border-radius: var(--gls-radius-md);

  /* Route A: inner tile (flat/soft). No backdrop blur here. */
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--gls-surface) 78%, transparent 22%),
    color-mix(in srgb, var(--gls-surface) 66%, transparent 34%)
  );

  box-shadow:
    0 1px 0 color-mix(in srgb, #fff 45%, transparent) inset,
    0 1px 2px color-mix(in srgb, var(--gls-border) 12%, transparent);
  text-align: center;
  transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
}

.author-stat::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
    120% 80% at 22% 0%,
    rgba(255, 255, 255, 0.55),
    rgba(255, 255, 255, 0) 60%
  );
  pointer-events: none;
  opacity: 0.95;
}

.author-stat:hover {
  transform: translateY(-3px);
  box-shadow:
    0 10px 20px rgba(0, 0, 0, 0.06),
    0 1px 0 color-mix(in srgb, #fff 65%, transparent) inset;
  background: linear-gradient(
    180deg,
    color-mix(in srgb, #fff 82%, transparent 18%),
    color-mix(in srgb, #fff 70%, transparent 30%)
  );
}

.author-stat .label {
  display: block;
  color: var(--author-text-muted);
  font-size: 0.88rem;
  margin-bottom: 2px;
  word-break: keep-all;
}

.author-stat .value {
  display: block;
  font-weight: 700;
  font-size: 1.05rem;
}

.author-follow-block {
  padding-top: var(--gls-space-2);
  border-top: 1px solid var(--author-divider);
}

.author-follow-block .gls-text-muted {
  margin-top: var(--gls-space-2);
}

.author-post-title {
  font-size: 1rem;
  margin-bottom: 0.2rem;
}

.author-post-meta {
  font-size: 0.82rem;
}

.author-profile-card .gls-text-muted,
.author-post-meta,
.author-post-extra,
#authorPostsLoading,
#authorPostsEmpty,
#authorPostsEnd,
#authorFollowHint {
  color: var(--author-text-muted);
}

.author-profile-card hr {
  border-color: var(--author-divider);
}

#authorFollowBtn.gls-btn-primary,
#authorFollowBtn.is-active {
  /* author-scoped source of truth */
  --gls-author-btn-primary-bg: var(--author-accent);
  --gls-author-btn-primary-border: var(--author-accent);
  --gls-author-btn-primary-text: #fff;

  /* bridge (components read these) */
  --gls-btn-primary-bg: var(--gls-author-btn-primary-bg);
  --gls-btn-primary-border: var(--gls-author-btn-primary-border);
  --gls-btn-primary-text: var(--gls-author-btn-primary-text);
}

#authorFollowBtn.gls-btn-secondary {
  /* author-scoped source of truth */
  --gls-author-btn-secondary-bg: transparent;
  --gls-author-btn-secondary-border: color-mix(in srgb, var(--author-accent) 42%, transparent);
  --gls-author-btn-secondary-text: var(--author-accent);

  /* bridge */
  --gls-btn-secondary-bg: var(--gls-author-btn-secondary-bg);
  --gls-btn-secondary-border: var(--gls-author-btn-secondary-border);
  --gls-btn-secondary-text: var(--gls-author-btn-secondary-text);
}

#authorFollowBtn.gls-btn-secondary:hover,
#authorFollowBtn.gls-btn-secondary:focus-visible {
  /* author-scoped source of truth (hover) */
  --gls-author-btn-secondary-bg: color-mix(in srgb, var(--author-accent) 10%, transparent);
  --gls-author-btn-secondary-border: color-mix(in srgb, var(--author-accent) 52%, transparent);

  /* bridge (hover) */
  --gls-btn-secondary-bg: var(--gls-author-btn-secondary-bg);
  --gls-btn-secondary-border: var(--gls-author-btn-secondary-border);
}

/* 좋아요/해시태그 라인 간격 */
.author-post-extra {
  margin-top: 0.4rem;
}

.author-feed-toolbar {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: var(--gls-space-3);
  background: var(--gls-surface-panel-bg);
  border: 1px solid var(--gls-surface-panel-border);
  border-radius: var(--gls-surface-panel-radius);
  box-shadow: var(--gls-surface-panel-shadow);
  backdrop-filter: blur(var(--gls-surface-panel-blur));
  -webkit-backdrop-filter: blur(var(--gls-surface-panel-blur));
  padding: clamp(18px, 2vw, 24px);
  margin-bottom: var(--gls-space-3);
}

.author-feed-toolbar-text h4 {
  font-weight: 700;
}

.author-feed-toolbar-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--gls-space-2);
}

.author-profile-action.gls-hidden {
  display: none;
}

.author-sort-options {
  display: grid;
  gap: var(--gls-space-2);
}

.author-sort-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--gls-radius-md);
  border: 1px solid color-mix(in srgb, var(--gls-border) 40%, transparent);
  background: rgba(255, 255, 255, 0.65);
  cursor: pointer;
  font-weight: 600;
  color: var(--gls-text);
}

.author-sort-option input {
  accent-color: var(--author-accent);
}

.author-toast {
  position: fixed;
  left: 50%;
  bottom: 24px;
  transform: translateX(-50%);
  background: rgba(30, 30, 30, 0.85);
  color: #fff;
  padding: 10px 16px;
  border-radius: 999px;
  font-size: 0.9rem;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  z-index: 2000;
}

.author-toast.is-visible {
  opacity: 1;
  transform: translateX(-50%) translateY(-4px);
}

body.page-author #authorEmailDisplay {
  color: var(--author-text-muted);
}

/* =========================
   3. 왼쪽 프로필 카드 높이 & sticky
========================= */

/* 기본: 내용이 적어도 어느 정도 키 유지 */
.author-profile-card {
  min-height: 320px;      /* 필요하면 300~380 사이에서 숫자만 조절 */
  display: flex;
  flex-direction: column;
}

/* 내용이 남는 공간을 자연스럽게 채우도록 */
.author-profile-card .card-body {
  flex: 1 0 auto;
}

.author-left-col {
  position: static;
  min-width: 320px;
}

.author-profile-card {
  position: sticky;
  top: var(--gls-sticky-offset, calc(var(--gls-nav-height, 84px) + var(--gls-space-4, 16px)));
  max-height: calc(100vh - (var(--gls-sticky-offset, calc(var(--gls-nav-height, 84px) + 16px)) + var(--gls-space-4, 16px)));
  overflow: auto;
}

@media (max-width: 1024px) {
  .author-profile-card {
    position: static;
    max-height: none;
    overflow: visible;
  }
}

body.page-author .break-anywhere {
  word-break: break-word;
  overflow-wrap: anywhere;
}

.author-page-header h2,
.author-page-header p,
.author-profile-card h5,
.author-profile-card dt,
.author-profile-card strong,
.author-posts-card h4,
.author-post-title,
.author-label,
.author-bio-text,
.author-about-text,
.author-stat .label,
.author-stat .value {
  word-break: keep-all;
  line-height: var(--gls-lh-normal);
}

.author-bio-text {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.author-about-text {
  display: -webkit-box;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
  white-space: pre-line;
}

.author-identity-block .gls-user-badge__body {
  overflow: hidden;
}

/* =========================
  4. 작가 페이지 전용 푸터(선택)
========================= */

body.page-author .site-footer {
  border-top: 1px solid var(--author-divider);
  background: var(--author-surface);
}
