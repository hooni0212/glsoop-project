/* =========================
   post.css
   - 글 상세 페이지(post.html) 전용 스타일
   - body.page-post 범위로만 적용해서 다른 페이지에 영향 최소화

   목표(시안 A)
   1) 큰 흰 컨테이너 삭제: 배경 감성 살리기
   2) 데스크탑 2컬럼: 본문(읽기) + 우측 스티키 패널
   3) 관련 글: 하이라이트 1개 + 컴팩트 리스트
   4) 레이어 최소화: '배경 → 유리 패널'에서 멈추기
========================= */

/* post.html에만 적용: 기본 섹션 패딩을 줄여서 "읽기" 톤으로 */
body.page-post .page-section.post-page {
  padding: var(--gls-space-7, 32px) 0 var(--gls-space-8, 40px);
}

body.page-post .post-veil {
  position: relative;
}

body.page-post .post-veil::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.22),
    rgba(255, 255, 255, 0.18)
  );
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  pointer-events: none;
  z-index: 0;
}

body.page-post .post-veil > * {
  position: relative;
  z-index: 1;
}
/* =========================
   Glass 투명도 튜닝(상세 페이지)
   - 외곽 패널(post-panel) : 더 투명
   - 본문 카드(quote-card) : 패널보다 덜 투명(하지만 "하얗게 뜨지" 않게)
   - 계층: 배경 → post-panel(가장 투명) → quote-card(조금 더 불투명)
========================= */

body.page-post {
  --gls-post-panel-bg: rgba(255, 255, 255, 0.16);
  --gls-post-content-bg: rgba(255, 255, 255, 0.00);
  --post-glass-bg: rgba(255, 255, 255, 0.45);
  --post-glass-border: rgba(255, 255, 255, 0.60);
  --post-glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.04);
  --post-glass-radius: 22px;
  --post-glass-blur: 18px;
}

/* =========================
   0) 2컬럼 레이아웃(데스크탑)
========================= */

body.page-post .post-shell {
  /* gls-container가 좌우 padding을 담당 → 여기서는 세로 리듬만 */
  padding-block: var(--gls-space-4, 16px);
}

body.page-post .post-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--gls-space-5, 20px);
  align-items: start;
}

@media (min-width: 980px) {
  body.page-post .post-layout {
    grid-template-columns: minmax(0, 1fr) 360px;
    gap: var(--gls-space-6, 24px);
  }

  /* 본문 컬럼이 너무 넓어지지 않게 */
  body.page-post .post-main {
    max-width: 860px;
  }

  /* 글이 짧아도 '여백을 남겨' 상세 페이지 비율/리듬 유지 */
  body.page-post .post-panel {
    min-height: clamp(560px, 72vh, 760px);
  }

}

/* 우측 패널: 스티키 */
body.page-post .post-side-inner {
  position: sticky;
  top: var(--gls-sticky-offset);
  display: flex;
  flex-direction: column;
  gap: var(--gls-space-4, 16px);
}

@media (max-width: 979.98px) {
  body.page-post .post-side-inner {
    position: static;
  }
}

/* =========================
   1) 본문 패널(읽기)
========================= */

body.page-post .post-panel {
  padding: var(--gls-space-6, 24px);
}

body.page-post .post-glass-panel {
  background: var(--post-glass-bg);
  border: 1px solid var(--post-glass-border);
  border-radius: var(--post-glass-radius);
  box-shadow: var(--post-glass-shadow);
  backdrop-filter: blur(var(--post-glass-blur));
  -webkit-backdrop-filter: blur(var(--post-glass-blur));
}

/* post-panel 자체(외곽) 유리면: 더 투명하게 */
body.page-post .post-panel.gls-surface-panel:not(.post-glass-panel) {
  background: var(--gls-post-panel-bg);
}

/* post-panel의 "veil" 하이라이트도 줄여서 하얗게 뜨는 느낌을 방지 */
body.page-post .post-panel.gls-surface-veil::before {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.10), rgba(255, 255, 255, 0.03));
}

@media (max-width: 576px) {
  body.page-post .post-panel {
    padding: var(--gls-space-5, 20px);
  }
}

/* 카드 자체를 "컨텐츠 컨테이너"로 쓰지 않고, post-panel이 컨테이너가 되도록 */
body.page-post #postDetail .gls-post-card {
  margin: 0;
  border: 0;
  box-shadow: none;
  background: transparent;
}

body.page-post #postDetail .gls-post-card .card-body {
  padding: 0;
  gap: var(--gls-space-5, 20px);
}

/* 상세 페이지: 카드 내부(헤더) 액션 버튼은 우측 액션바로 통일 */
body.page-post #postDetail .gls-post-card .post-top-actions {
  display: none;
}

/* 타이틀을 상세 페이지에서만 조금 더 키움 */
body.page-post #postDetail .card-title {
  font-size: clamp(1.25rem, 2.1vw, 1.75rem);
  line-height: var(--gls-lh-tight, 1.25);
  letter-spacing: -0.2px;
  margin-bottom: 0;
}

/* 레이어 최소화: 본문은 별도 박스(quote-card) 대신 post-panel 위에 직접 올리기 */
body.page-post #postDetail .quote-card {
  width: 100%;
  max-width: 100%;
  aspect-ratio: auto;
  margin: 0;
  padding: 0;
  display: block;
  text-align: left;

  font-size: var(--gls-fs-md, 1rem);
  line-height: var(--gls-lh-relaxed, 1.75);

  background: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  border: 0;
  border-radius: 0;
  box-shadow: none;
  line-clamp: unset;
  overflow: visible;
}

body.page-post #postDetail .post-inner-surface {
  background: rgba(255, 255, 255, 0.62);
  border: 1px solid rgba(255, 255, 255, 0.55);
  border-radius: 18px;
  padding: var(--gls-space-5, 20px);
}

body.page-post #postDetail .post-content-surface {
  min-height: 520px;
  padding-bottom: calc(var(--gls-space-5, 20px) + 16px);
}

@media (max-width: 768px) {
  body.page-post #postDetail .post-content-surface {
    min-height: 360px;
  }
}

body.page-post #postDetail .quote-card > * {
  margin: 0 0 var(--gls-space-3, 12px);
}

body.page-post #postDetail .quote-card > *:last-child {
  margin-bottom: 0;
}

/* =========================
   메타 바 (카테고리/태그 + 돌아가기)
========================= */

body.page-post .post-tags-label {
  display: inline-flex;
  align-items: center;
  padding: 0 var(--gls-meta-chip-px);
  font-size: 0.78rem;
  font-weight: 900;
  letter-spacing: -0.2px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.12);
  color: rgba(30, 42, 51, 0.62);
  height: var(--gls-meta-chip-h);
  line-height: 1;
}

body.page-post .post-type-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 0 var(--gls-meta-chip-px);
  font-size: 0.9rem;
  font-weight: 800;
  letter-spacing: -0.1px;
  border-radius: var(--gls-chip-radius);
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: rgba(255, 255, 255, 0.28);
  color: rgba(30, 42, 51, 0.86);
  backdrop-filter: blur(var(--gls-glass-blur));
  -webkit-backdrop-filter: blur(var(--gls-glass-blur));
  box-shadow: var(--gls-glass-inset);
  white-space: nowrap;
  height: var(--gls-meta-chip-h);
  line-height: 1;
}

body.page-post .post-tag-chip {
  padding: 0 var(--gls-meta-chip-px);
  font-size: 0.9rem;
  font-weight: 750;
  border-radius: var(--gls-chip-radius);
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.22);
  color: rgba(30, 42, 51, 0.78);
  text-decoration: none;
  cursor: pointer;
  backdrop-filter: blur(var(--gls-glass-blur));
  -webkit-backdrop-filter: blur(var(--gls-glass-blur));
  box-shadow: var(--gls-glass-inset);
  height: var(--gls-meta-chip-h);
  line-height: 1;
  display: inline-flex;
  align-items: center;
}

body.page-post .post-chip-btn {
  height: var(--gls-meta-chip-h);
  padding: 0 var(--gls-meta-chip-px);
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

body.page-post .post-meta-category .post-category-row {
  margin-bottom: 0;
}

@media (hover: hover) and (pointer: fine) {
  body.page-post .post-tag-chip:hover,
  body.page-post .post-tag-chip:focus-visible {
    background: rgba(255, 255, 255, 0.30);
    border-color: rgba(255, 255, 255, 0.28);
  }
}

body.page-post .post-type-chip::before {
  content: "•";
  display: inline-block;
  opacity: 0.7;
}

body.page-post .post-meta-bar {
  --gls-meta-chip-h: 34px;
  --gls-meta-chip-px: 12px;
  margin-top: var(--gls-space-4, 16px);
  padding: var(--gls-space-4, 16px) var(--gls-space-5, 20px);
  border-radius: var(--gls-radius-card, 18px);
  background: var(--gls-glass-bg-strong);
  border: 1px solid var(--gls-glass-border);
  backdrop-filter: blur(var(--gls-glass-blur));
  -webkit-backdrop-filter: blur(var(--gls-glass-blur));
  box-shadow: var(--gls-glass-shadow);

  /* 카테고리(고정) / 태그(유동) / 돌아가기(고정) */
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  column-gap: var(--gls-space-3, 12px);
  row-gap: var(--gls-space-2, 8px);
}

/* 내부 래퍼는 레이아웃에 관여하지 않고 슬롯만 제공 */
body.page-post .post-meta-left {
  display: contents;
}

body.page-post .post-meta-category {
  grid-column: 1;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--gls-space-2, 8px);
  min-width: 0;
}

body.page-post .post-meta-tags-wrap {
  grid-column: 2;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--gls-space-2, 8px);
  min-width: 0;
}

body.page-post .post-meta-tags {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--gls-space-2, 8px);
  min-width: 0;
}

/* (호환) 구버전 컨테이너가 남아있어도 안전하게 */
body.page-post .post-meta-chips {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--gls-space-2, 8px);
  row-gap: var(--gls-space-2, 8px);
}

body.page-post .post-meta-bar .gls-card-hashtags {
  margin: 0;
  padding: 0;
  display: flex;
  flex-wrap: wrap;
  gap: var(--gls-space-2, 8px);
}

body.page-post .post-back-link {
  grid-column: 3;
  justify-self: end;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  font-weight: 800;
  color: rgba(30, 42, 51, 0.8);
  text-decoration: none;
  border-radius: var(--gls-btn-radius);
  transition: color 0.16s ease, background 0.16s ease, transform 0.16s ease;
  white-space: nowrap;
}

@media (hover: hover) and (pointer: fine) {
  body.page-post .post-back-link:hover {
    color: rgba(30, 42, 51, 0.95);
    background: rgba(255, 255, 255, 0.26);
    transform: translateY(-1px);
  }
}

body.page-post .post-back-link:active {
  transform: translateY(0);
}

@media (max-width: 640px) {
  body.page-post .post-meta-bar {
    grid-template-columns: 1fr;
    align-items: start;
  }

  body.page-post .post-meta-category {
    grid-column: 1;
  }

  body.page-post .post-meta-tags-wrap {
    grid-column: 1;
  }

  body.page-post .post-back-link {
    grid-column: 1;
    justify-self: end;
  }
}
/* =========================
   2) 우측 패널: 액션
========================= */

body.page-post .post-actions-panel {
  padding: var(--gls-space-4, 16px);
}

body.page-post .post-toolbar {
  background: var(--post-glass-bg);
  border: 1px solid var(--post-glass-border);
  border-radius: var(--post-glass-radius);
  box-shadow: var(--post-glass-shadow);
  backdrop-filter: blur(var(--post-glass-blur));
  -webkit-backdrop-filter: blur(var(--post-glass-blur));
  padding: 14px 16px;
}

body.page-post .post-actions-grid {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: flex-start;
}

body.page-post .post-actions-grid .post-side-like {
  flex: 1.15 1 0;
}

body.page-post .post-side-btn {
  color: var(--gls-color-text, #1e2a33);
  /* Prevent Korean words from breaking into multiple lines (e.g. "좋아\n요") */
  white-space: nowrap;
  word-break: keep-all;
  overflow-wrap: normal;
}

body.page-post .post-actions-grid .gls-action-tile {
  flex: 1 1 0;
}

body.page-post .post-side-like {
  justify-content: center;
}

body.page-post .post-side-like-heart {
  font-size: 1rem;
}

body.page-post .post-side-like-count {
  font-variant-numeric: tabular-nums;
}

body.page-post .post-side-like-label {
  font-size: 0.82rem;
  font-weight: 700;
  opacity: 0.9;
}

/* 모바일에서는 액션을 조금 더 편하게 */
@media (max-width: 420px) {
  body.page-post .post-actions-grid {
    flex-wrap: wrap;
  }

  body.page-post .post-side-like {
    flex-basis: 100%;
  }
}

/* =========================
   3) 우측 패널: 관련 글(시안 A)
========================= */

body.page-post .post-related-panel {
  padding: var(--gls-space-4, 16px);
}

body.page-post .post-related-head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: var(--gls-space-3, 12px);
}

body.page-post .post-related-title {
  font-size: 1.05rem;
  font-weight: 800;
  margin: 0;
  letter-spacing: -0.2px;
}

body.page-post .post-related-more {
  font-size: 0.9rem;
  font-weight: 700;
  color: rgba(30, 42, 51, 0.75);
}

body.page-post .post-related-more:hover {
  color: rgba(30, 42, 51, 0.95);
}

/* 하이라이트 카드 */
body.page-post .post-related-highlight {
  border-radius: var(--gls-radius-card);
  border: 1px solid var(--gls-glass-border);
  background: var(--gls-glass-bg-strong);
  padding: 14px 14px;
  margin-bottom: var(--gls-space-3, 12px);
  cursor: pointer;
  transition: transform 0.16s ease, border-color 0.16s ease, background 0.16s ease;
}

@media (hover: hover) and (pointer: fine) {
  body.page-post .post-related-highlight:hover {
    transform: translateY(-2px);
    border-color: rgba(46, 139, 87, 0.18);
    background: var(--gls-glass-bg-strong);
  }
}

body.page-post .post-related-h-title {
  font-weight: 800;
  line-height: 1.25;
  letter-spacing: -0.2px;
  margin: 0 0 8px;
}

body.page-post .post-related-h-snippet {
  font-size: 0.95rem;
  line-height: 1.55;
  color: rgba(30, 42, 51, 0.82);
  margin: 0 0 10px;
  display: -webkit-box;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

body.page-post .post-related-h-meta {
  font-size: 0.82rem;
  color: rgba(30, 42, 51, 0.6);
  display: flex;
  gap: 10px;
  align-items: center;
}

/* 리스트 아이템 */
body.page-post .post-related-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

body.page-post .post-related-item {
  padding: 10px 10px;
  border-radius: var(--gls-radius-card);
  border: 1px solid var(--gls-glass-border);
  background: var(--gls-glass-bg-subtle);
  cursor: pointer;
  transition: background 0.14s ease, border-color 0.14s ease;
}

@media (hover: hover) and (pointer: fine) {
  body.page-post .post-related-item:hover {
    background: var(--gls-glass-bg-strong);
    border-color: color-mix(in srgb, var(--gls-glass-border) 70%, #ffffff 30%);
  }
}

body.page-post .post-related-item-title {
  font-size: 0.95rem;
  font-weight: 800;
  line-height: 1.25;
  margin: 0 0 6px;
  display: -webkit-box;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

body.page-post .post-related-item-snippet {
  font-size: 0.86rem;
  line-height: 1.45;
  color: rgba(30, 42, 51, 0.78);
  margin: 0;
  display: -webkit-box;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

body.page-post .post-related-item-meta {
  margin-top: 8px;
  font-size: 0.78rem;
  color: rgba(30, 42, 51, 0.55);
  display: flex;
  gap: 10px;
  align-items: center;
}

/* 구버전 relatedPosts는 숨김 */
body.page-post #relatedPosts.post-related-legacy[hidden] {
  display: none;
}

/* 상세 본문 */
.gls-detail-card {
  margin-bottom: 2rem;
}

.gls-detail-content {
  white-space: pre-wrap;
  word-break: break-word;
}
